<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil del Niño - Yachay Mikuy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #2c5aa0;
            --light-blue: #5d8cc4;
            --dark-blue: #1a3a6e;
            --success-green: #28a745;
            --success-green-dark: #218838;
            --accent-orange: #ff9800;
            --accent-orange-dark: #e08e0b;
            --accent-purple: #6f42c1;
            --accent-purple-dark: #5a32a3;
            --accent-teal: #20c997;
            --accent-teal-dark: #1aa27d;
            --accent-pink: #d63384;
            --accent-pink-dark: #b02a6e;
            --accent-cyan: #0dcaf0;
            --accent-cyan-dark: #0baccc;
            --gray: #6c757d;
            --light-gray: #f8f9fa;
            --white: #ffffff;
            --shadow-color: rgba(40, 50, 70, 0.1);
            --danger-red: #dc3545;
            --danger-red-dark: #c82333;
            
            /* Variables para el footer */
            --text-dark: #212529;
            --shadow: 0 8px 24px rgba(0, 0, 0, 0.08); 
            --radius: 12px;
            --transition: all 0.3s ease-in-out;
            --accent-red: #e63946;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background-image: linear-gradient(120deg, #f5f9ff 0%, #e6f0fa 100%);
            color: #333;
            line-height: 1.6;
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            flex: 1;
        }

        .profile-header {
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 8px 30px var(--shadow-color);
            padding: 30px 40px;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 8px solid var(--primary-blue);
        }

        .profile-left {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .child-avatar {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--white);
            font-size: 3rem;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(44, 90, 160, 0.4);
            animation: pulse 2.5s infinite ease-in-out;
        }

        .child-details h1 {
            color: var(--dark-blue);
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0;
        }

        .child-details p {
            color: var(--gray);
            font-size: 1.2rem;
            margin: 0;
            font-weight: 500;
        }

        .btn-exit {
            padding: 12px 25px;
            background: linear-gradient(45deg, var(--danger-red), #e85d75);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-exit:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
            background: linear-gradient(45deg, var(--danger-red-dark), var(--danger-red));
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
        }

        .dashboard-card {
            background-color: var(--white);
            border-radius: 20px;
            box-shadow: 0 8px 30px var(--shadow-color);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease-in-out;
            border-top: 5px solid transparent;
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
            position: relative;
            overflow: hidden;
        }
        
        .dashboard-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .dashboard-card:nth-child(1) { animation-delay: 0.1s; }
        .dashboard-card:nth-child(2) { animation-delay: 0.2s; }
        .dashboard-card:nth-child(3) { animation-delay: 0.3s; }
        .dashboard-card:nth-child(4) { animation-delay: 0.4s; }
        .dashboard-card:nth-child(5) { animation-delay: 0.5s; }
        .dashboard-card:nth-child(6) { animation-delay: 0.6s; }

        .dashboard-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 40px rgba(40, 50, 70, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--white);
            font-size: 1.8rem;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-blue);
        }

        .card-description {
            color: var(--gray);
            font-weight: 400;
            margin-bottom: 25px;
            flex-grow: 1;
            position: relative;
            z-index: 1;
        }

        .card-content {
            margin-top: auto;
            position: relative;
            z-index: 1;
        }

        .region-selector, .btn-action {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
        }

        .region-selector {
            border: 2px solid #ddd;
            background-color: var(--light-gray);
            color: var(--dark-blue);
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            margin-bottom: 15px;
        }

        .region-selector:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.2);
        }

        .btn-action {
            border: none;
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        /* --- Card-specific colors & gradients --- */
        .card-pantry { border-top-color: var(--success-green); }
        .card-pantry .card-icon { background: linear-gradient(45deg, var(--success-green), #58c271); }
        .card-pantry .btn-action { background: linear-gradient(45deg, var(--success-green), #58c271); }
        .card-pantry .btn-action:hover { background: linear-gradient(45deg, var(--success-green-dark), var(--success-green)); }

        .card-region { border-top-color: var(--accent-orange); }
        .card-region .card-icon { background: linear-gradient(45deg, var(--accent-orange), #ffb74d); }
        .card-region .btn-action { background: linear-gradient(45deg, var(--accent-orange), #ffb74d); }
        .card-region .btn-action:hover { background: linear-gradient(45deg, var(--accent-orange-dark), var(--accent-orange)); }
        
        .card-wellness { border-top-color: var(--accent-purple); }
        .card-wellness .card-icon { background: linear-gradient(45deg, var(--accent-purple), #9575cd); }
        .card-wellness .btn-action { background: linear-gradient(45deg, var(--accent-purple), #9575cd); }
        .card-wellness .btn-action:hover { background: linear-gradient(45deg, var(--accent-purple-dark), var(--accent-purple)); }

        .card-academic { border-top-color: var(--accent-teal); }
        .card-academic .card-icon { background: linear-gradient(45deg, var(--accent-teal), #4dd9b4); }
        .card-academic .btn-action { background: linear-gradient(45deg, var(--accent-teal), #4dd9b4); }
        .card-academic .btn-action:hover { background: linear-gradient(45deg, var(--accent-teal-dark), var(--accent-teal)); }
        
        .card-games { border-top-color: var(--accent-pink); }
        .card-games .card-icon { background: linear-gradient(45deg, var(--accent-pink), #f06292); }
        .card-games .btn-action { background: linear-gradient(45deg, var(--accent-pink), #f06292); }
        .card-games .btn-action:hover { background: linear-gradient(45deg, var(--accent-pink-dark), var(--accent-pink)); }

        .card-daily { border-top-color: var(--accent-cyan); }
        .card-daily .card-icon { background: linear-gradient(45deg, var(--accent-cyan), #4dd0e1); }
        .card-daily .btn-action { background: linear-gradient(45deg, var(--accent-cyan), #4dd0e1); }
        .card-daily .btn-action:hover { background: linear-gradient(45deg, var(--accent-cyan-dark), var(--accent-cyan)); }
        
        .back-button-container {
            margin-top: 40px;
            text-align: center;
        }
        
        .btn-back {
            padding: 14px 35px;
            border: 2px solid var(--gray);
            color: var(--gray);
            background-color: transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .btn-back:hover {
            background-color: var(--gray);
            color: var(--white);
            transform: scale(1.05);
        }

        .profile-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(44, 90, 160, 0.1);
            color: var(--primary-blue);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- ESTILOS DEL FOOTER --- */
        .footer {
            background-color: var(--primary-blue);
            color: var(--white);
            padding: 40px 20px 10px;
            margin-top: auto;
        }
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding-bottom: 20px;
        }
        .footer-section h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
            border-bottom: 2px solid var(--accent-red);
            padding-bottom: 5px;
            display: inline-block;
        }
        .social-links a {
            color: var(--white);
            font-size: 1.5rem;
            margin-right: 15px;
            transition: var(--transition);
        }
        .social-links a:hover {
            color: var(--accent-red);
            transform: scale(1.1);
        }
        .footer-section p {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .footer-section p i {
            margin-right: 10px;
            color: var(--accent-red);
        }
        .footer-links {
            list-style: none;
        }
        .footer-links a {
            color: var(--white);
            text-decoration: none;
            font-size: 0.95rem;
            transition: var(--transition);
            display: block; 
        }
        .footer-links a:hover {
            color: var(--accent-red);
            padding-left: 5px;
        }
        .footer-links a i {
            margin-right: 10px;
        }
        .footer-bottom {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            padding: 15px 0 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85rem;
            font-weight: 300;
        }
        
        /* --- ESTILOS DEL MODAL (FLOTANTE Y CENTRADO) --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Fondo semi-transparente negro */
            display: flex;
            justify-content: center;
            align-items: center; /* Centrado vertical y horizontal */
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        /* Contenido Central del Modal (Fondo Blanco) */
        .modal-content {
            background-color: var(--white); 
            color: var(--text-dark);
            padding: 30px;
            border-radius: var(--radius);
            max-width: 800px;
            width: 90%;
            max-height: 95vh; /* Limita la altura de la caja blanca para que siempre quepa */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-50px);
            transition: transform 0.3s ease;
            margin: 20px auto; /* Centrado horizontal y margen vertical */
            display: flex;
            flex-direction: column;
        }
        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            /* Se mantiene fijo */
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--dark-gray);
            padding-bottom: 15px;
            margin-bottom: 20px;
            flex-shrink: 0; /* Asegura que no se encoja cuando el body haga scroll */
        }
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
        }
        .close-modal:hover {
            color: var(--accent-red);
            transform: rotate(90deg);
        }
        
        /* Contenedor de Contenido con Deslizador (La clave para la estética) */
        .modal-body {
            line-height: 1.6;
            font-size: 0.95rem;
            max-height: 70vh; /* Altura máxima para el contenido con scroll */
            overflow-y: auto; /* **ACTIVA EL SCROLL VERTICAL** */
            padding-right: 15px; /* Espacio para el deslizador */
            margin-right: -15px; /* Compensa el padding para que el contenido quede centrado */
            flex-grow: 1; /* Permite que ocupe el espacio restante */
        }

        /* Estilos internos del contenido */
        .modal-body h3 {
            color: var(--primary-blue);
            margin-top: 20px;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.2rem;
        }
        .modal-body i {
            margin-right: 8px;
            color: var(--accent-red);
        }
        .content-section {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 3px solid var(--accent-red);
            background-color: var(--light-gray);
            border-radius: 0 5px 5px 0;
        }
        .content-section ul {
            padding-left: 20px;
        }
        .content-section li {
            list-style: disc;
            margin-bottom: 5px;
        }
        .highlight-box {
            background-color: #ffe5e8;
            padding: 15px;
            border-radius: var(--radius);
            border: 1px solid var(--accent-red);
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            .profile-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
                padding: 25px;
            }
            .profile-left {
                flex-direction: column;
                text-align: center;
            }
            .child-details h1 {
                font-size: 2rem;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .btn-exit {
                align-self: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="profile-header">
            <div class="profile-left">
                <div class="child-avatar">
                    <i class="fas fa-child"></i>
                </div>
                <div class="child-details">
                    <h1 id="childName">Cargando perfil...</h1>
                    <p>Edad: <span id="childAge">-</span> años</p>
                </div>
            </div>
            <a href="index.html" class="btn-exit">
                <i class="fas fa-sign-out-alt"></i> Salir
            </a>
        </header>

        <main class="dashboard-grid">
            <div class="dashboard-card card-pantry">
                <div class="profile-indicator">
                    <i class="fas fa-user-circle"></i> Perfil específico
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-shopping-basket"></i></div>
                    <h2 class="card-title">Comida con Despensa</h2>
                </div>
                <p class="card-description">Genera un plan de comidas nutritivas utilizando los ingredientes que ya tienes en casa. Optimiza tus recursos.</p>
                <div class="card-content">
                    <a href="#" id="pantryLink" class="btn-action">
                        <i class="fas fa-utensils"></i> Empezar
                    </a>
                </div>
            </div>

            <div class="dashboard-card card-region">
                <div class="profile-indicator">
                    <i class="fas fa-user-circle"></i> Perfil específico
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-map-marked-alt"></i></div>
                    <h2 class="card-title">Comida por Región</h2>
                </div>
                <p class="card-description">Descubre platos basados en alimentos típicos de cada departamento del Perú. Selecciona una región.</p>
                <div class="card-content">
                    <select id="regionSelector" class="region-selector" name="departamento">
                        <option value="">Selecciona un departamento</option>
                    </select>
                    <button id="regionButton" class="btn-action">
                        <i class="fas fa-search-location"></i> Generar
                    </button>
                </div>
            </div>

            <div class="dashboard-card card-wellness">
                <div class="profile-indicator">
                    <i class="fas fa-user-circle"></i> Perfil específico
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-brain"></i></div>
                    <h2 class="card-title">Bienestar Psicológico</h2>
                </div>
                <p class="card-description">Accede a consejos y actividades para fomentar el desarrollo emocional y psicológico de tu hijo.</p>
                <div class="card-content">
                    <a href="#" id="wellnessLink" class="btn-action">
                        <i class="fas fa-lightbulb"></i> Ver Recomendaciones
                    </a>
                </div>
            </div>

            <div class="dashboard-card card-academic">
                <div class="profile-indicator">
                    <i class="fas fa-user-circle"></i> Perfil específico
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-book-reader"></i></div>
                    <h2 class="card-title">Apoyo Académico</h2>
                </div>
                <p class="card-description">Encuentra estrategias para potenciar el rendimiento académico y la concentración del niño.</p>
                <div class="card-content">
                    <a href="#" id="academicLink" class="btn-action">
                        <i class="fas fa-graduation-cap"></i> Explorar Estrategias
                    </a>
                </div>
            </div>
            
            <div class="dashboard-card card-games">
                <div class="profile-indicator">
                    <i class="fas fa-user-circle"></i> Perfil específico
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-puzzle-piece"></i></div>
                    <h2 class="card-title">Jugando es Divertido</h2>
                </div>
                <p class="card-description">Descubre una selección de juegos educativos diseñados para estimular la mente y creatividad de tu hijo.</p>
                <div class="card-content">
                    <a href="#" id="gamesLink" class="btn-action">
                        <i class="fas fa-gamepad"></i> Ver Juegos
                    </a>
                </div>
            </div>
            
            <div class="dashboard-card card-daily">
                <div class="profile-indicator">
                    <i class="fas fa-user-circle"></i> Perfil específico
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-plate-wheat"></i></div>
                    <h2 class="card-title">Platos del Día</h2>
                </div>
                <p class="card-description">Recibe recomendaciones diarias de platos balanceados y deliciosos para asegurar su correcta nutrición.</p>
                <div class="card-content">
                    <a href="#" id="dailyLink" class="btn-action">
                        <i class="fas fa-calendar-day"></i> Consultar
                    </a>
                </div>
            </div>

        </main>
        
        <div class="back-button-container">
            <a href="#" id="backToDashboardBtn" class="btn-back">
                <i class="fas fa-arrow-left"></i> Volver al panel de niños
            </a>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Redes Sociales</h3>
                <div class="social-links">
                    <a href="https://facebook.com/yachaymikuy" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://twitter.com/yachaymikuy" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="https://instagram.com/yachaymikuy" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://youtube.com/channel/yachaymikuy" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="https://wa.me/51918072862" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Contacto</h3>
                <p><i class="fas fa-envelope"></i> yachay.mikuy@gmail.com</p>
                <p><i class="fas fa-phone"></i> +51 918 072 862</p>
                <p><i class="fas fa-map-marker-alt"></i> Lima - Perú</p>
            </div>
            <div class="footer-section">
                <h3>Enlaces Útiles</h3>
                <ul class="footer-links">
                    <li><a href="#" id="aboutLink"><i class="fas fa-info-circle"></i> Acerca de Nosotros</a></li>
                    <li><a href="#" id="servicesLink"><i class="fas fa-concierge-bell"></i> Servicios</a></li>
                    <li><a href="#" id="faqLink"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a></li>
                    <li><a href="#" id="privacyLink"><i class="fas fa-shield-alt"></i> Política de Privacidad</a></li>
                    <li><a href="#" id="termsLink"><i class="fas fa-file-contract"></i> Términos y Condiciones</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">&copy; 2025 Yachay Mikuy. Todos los derechos reservados.</div>
    </footer>

    <div id="actionModalContainer"></div>

    <script>
        // Storage Adapter - Para facilitar migración a backend
        const storageAdapter = {
            // Users
            getUsers: function() {
                const users = localStorage.getItem('yachay_users');
                return users ? JSON.parse(users) : [];
            },
            saveUsers: function(users) {
                localStorage.setItem('yachay_users', JSON.stringify(users));
            },
            
            // Children
            getChildren: function() {
                const children = localStorage.getItem('yachay_children');
                return children ? JSON.parse(children) : [];
            },
            saveChildren: function(children) {
                localStorage.setItem('yachay_children', JSON.stringify(children));
            },
            
            // Responses
            getResponses: function() {
                const responses = localStorage.getItem('yachay_responses');
                return responses ? JSON.parse(responses) : {};
            },
            saveResponses: function(responses) {
                localStorage.setItem('yachay_responses', JSON.stringify(responses));
            },
            
            // Session
            getSession: function() {
                const session = localStorage.getItem('yachay_session');
                return session ? JSON.parse(session) : { currentUserId: null, exploringAsGuest: false, lastActiveAt: null };
            },
            saveSession: function(session) {
                localStorage.setItem('yachay_session', JSON.stringify(session));
            },
            
            // Audit Log
            getAuditLog: function() {
                const auditLog = localStorage.getItem('yachay_auditLog');
                return auditLog ? JSON.parse(auditLog) : [];
            },
            saveAuditLog: function(auditLog) {
                localStorage.setItem('yachay_auditLog', JSON.stringify(auditLog));
            }
        };

        // Función para calcular la edad a partir de la fecha de nacimiento
        function calculateAge(dob) {
            const birthDate = new Date(dob);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }

        // Función para obtener parámetros de la URL
        function getURLParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const childId = urlParams.get('childId');
            const guestMode = urlParams.get('guest') === 'true';

            // Verificar si estamos en modo invitado o con cuenta
            const session = storageAdapter.getSession();
            let isGuestMode = guestMode || session.exploringAsGuest;

            // Si no hay childId, verificar si estamos en modo invitado
            if (!childId) {
                if (isGuestMode) {
                    // Crear niños de ejemplo si no existen
                    createGuestChildrenIfNotExists();
                    // Seleccionar el primer niño de ejemplo (Alvaro)
                    const guestChildren = getGuestChildren();
                    if (guestChildren.length > 0) {
                        loadChildProfile(guestChildren[0]);
                    } else {
                        document.body.innerHTML = '<h1>Error: No se encontraron datos. Redirigiendo...</h1>';
                        setTimeout(() => { window.location.href = 'index.html'; }, 3000);
                    }
                } else {
                    document.body.innerHTML = '<h1>Error: No se ha seleccionado un perfil. Redirigiendo...</h1>';
                    setTimeout(() => { window.location.href = 'index.html'; }, 3000);
                }
                return;
            }

            // Si hay childId, cargar el perfil del niño
            if (isGuestMode) {
                // Modo invitado
                const guestChildren = getGuestChildren();
                const currentChild = guestChildren.find(child => child.id === childId);
                
                if (currentChild) {
                    loadChildProfile(currentChild);
                } else {
                    document.body.innerHTML = `<h1>Error: Perfil con ID ${childId} no encontrado. Redirigiendo...</h1>`;
                    setTimeout(() => { window.location.href = 'index.html'; }, 3000);
                }
            } else {
                // Modo con cuenta
                const childrenData = storageAdapter.getChildren();
                const currentChild = childrenData.find(child => child.id === childId);

                if (!currentChild) {
                    document.body.innerHTML = `<h1>Error: Perfil con ID ${childId} no encontrado. Redirigiendo...</h1>`;
                    setTimeout(() => { window.location.href = 'index.html'; }, 3000);
                    return;
                }

                loadChildProfile(currentChild);
            }

            // Función para cargar el perfil del niño
            function loadChildProfile(currentChild) {
                document.getElementById('childName').textContent = currentChild.name;
                document.getElementById('childAge').textContent = calculateAge(currentChild.dob);
                document.title = `${currentChild.name} - Perfil - Yachay Mikuy`;

                // Configurar los enlaces de TODOS los tableros
                document.getElementById('pantryLink').href = `chicos1.html?childId=${currentChild.id}${isGuestMode ? '&guest=true' : ''}`;
                document.getElementById('wellnessLink').href = `chicos3.html?childId=${currentChild.id}${isGuestMode ? '&guest=true' : ''}`;
                document.getElementById('academicLink').href = `chicos4.html?childId=${currentChild.id}${isGuestMode ? '&guest=true' : ''}`;
                document.getElementById('gamesLink').href = `chicos5.html?childId=${currentChild.id}${isGuestMode ? '&guest=true' : ''}`;
                document.getElementById('dailyLink').href = `chicos6.html?childId=${currentChild.id}${isGuestMode ? '&guest=true' : ''}`;
                
                // El botón de volver apunta a la pantalla de finalización de yachaymikuy.html
                const totalQuestionsInYachay = 55; // El número total de preguntas en el cuestionario
                const backButton = document.getElementById('backToDashboardBtn');
                
                if (isGuestMode) {
                    backButton.href = `yachaymikuy.html?guest=true&showCompletion=true`;
                } else {
                    backButton.href = `yachaymikuy.html?childId=${currentChild.id}&edit=true&question=${totalQuestionsInYachay}`;
                }
                
                const departments = [
                    "Amazonas", "Áncash", "Apurímac", "Arequipa", "Ayacucho", "Cajamarca", 
                    "Callao", "Cusco", "Huancavelica", "Huánuco", "Ica", "Junín", 
                    "La Libertad", "Lambayeque", "Lima", "Loreto", "Madre de Dios", 
                    "Moquegua", "Pasco", "Piura", "Puno", "San Martín", "Tacna", 
                    "Tumbes", "Ucayali"
                ];
                
                const regionSelector = document.getElementById('regionSelector');
                departments.forEach(dept => {
                    const option = document.createElement('option');
                    option.value = dept.toLowerCase().replace(/á/g, 'a').replace(/\s+/g, '-');
                    option.textContent = dept;
                    regionSelector.appendChild(option);
                });

                const regionButton = document.getElementById('regionButton');
                regionButton.addEventListener('click', function() {
                    const selectedDepartment = regionSelector.value;
                    if (selectedDepartment) {
                        window.location.href = `chicos2.html?childId=${currentChild.id}&departamento=${selectedDepartment}${isGuestMode ? '&guest=true' : ''}`;
                    } else {
                        alert('Por favor, selecciona un departamento antes de generar.');
                    }
                });
            }

            // Función para obtener niños de ejemplo
            function getGuestChildren() {
                const children = storageAdapter.getChildren();
                return children.filter(child => child.ownerId === null && child.progressPercent === 100);
            }

            // Función para crear niños de ejemplo si no existen
            function createGuestChildrenIfNotExists() {
                const children = storageAdapter.getChildren();
                
                // Verificar si ya existen los niños de ejemplo
                const hasAlvaro = children.some(child => child.name === 'Alvaro');
                const hasLuz = children.some(child => child.name === 'Luz');
                
                if (!hasAlvaro) {
                    children.push({
                        id: 'alvaro-' + Date.now(),
                        name: 'Alvaro',
                        dob: '2017-08-10',
                        sex: 'male',
                        avatarCustomization: '1',
                        theme: 'default',
                        ownerId: null,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                        progressPercent: 100,
                        deletedAt: null,
                        version: 1
                    });
                }
                
                if (!hasLuz) {
                    children.push({
                        id: 'luz-' + Date.now(),
                        name: 'Luz',
                        dob: '2019-12-05',
                        sex: 'female',
                        avatarCustomization: '2',
                        theme: 'default',
                        ownerId: null,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                        progressPercent: 100,
                        deletedAt: null,
                        version: 1
                    });
                }
                
                storageAdapter.saveChildren(children);
                
                // Crear respuestas para los perfiles predefinidos
                const responses = storageAdapter.getResponses();
                
                const alvaroId = children.find(child => child.name === 'Alvaro').id;
                const luzId = children.find(child => child.name === 'Luz').id;
                
                if (!responses[alvaroId]) {
                    responses[alvaroId] = {};
                    for (let i = 1; i <= 50; i++) {
                        responses[alvaroId][`q${i}`] = {
                            type: 'select',
                            value: i % 5 === 0 ? 'Opción 5' : `Opción ${i % 5}`,
                            timestamp: new Date().toISOString(),
                            version: 1
                        };
                    }
                }
                
                if (!responses[luzId]) {
                    responses[luzId] = {};
                    for (let i = 1; i <= 50; i++) {
                        responses[luzId][`q${i}`] = {
                            type: 'select',
                            value: i % 5 === 0 ? 'Opción 5' : `Opción ${i % 5}`,
                            timestamp: new Date().toISOString(),
                            version: 1
                        };
                    }
                }
                
                storageAdapter.saveResponses(responses);
            }
        });

        // Configuración de modales del footer
        document.addEventListener('DOMContentLoaded', function() {
            // Referencia al contenedor donde se inyectarán los modales
            const actionModalContainer = document.getElementById('actionModalContainer');

            // Funciones para manejo de UI (abrir/cerrar modal)
            const ui = {
                openModal: (content) => { 
                    actionModalContainer.innerHTML = content;
                    const modal = actionModalContainer.querySelector('.modal');
                    if (modal) {
                        // Muestra el modal con una pequeña demora para la animación
                        setTimeout(() => modal.classList.add('active'), 10);
                    }
                },
                closeModal: () => { 
                    const modal = actionModalContainer.querySelector('.modal');
                    if (modal) {
                        modal.classList.remove('active');
                        // Espera a que termine la animación (0.3s) antes de vaciar el HTML
                        setTimeout(() => actionModalContainer.innerHTML = '', 300);
                    }
                }
            };

            // Plantillas HTML para el contenido de los modales
            const templates = {
                /* Contenido del Modal "Acerca de Nosotros" */
                aboutModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Acerca de Yachay Mikuy</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-bullseye"></i> Nuestra Misión</h3>
                                    <p>Reducir la prevalencia de anemia y malnutrición en niños de 6 a 13 años mediante planes de alimentación personalizados, adaptados culturalmente y económicamente a la realidad de las familias peruanas.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-eye"></i> Nuestra Visión</h3>
                                    <p>Convertirnos en la plataforma digital líder en nutrición infantil en Perú, contribuyendo al desarrollo humano y social del país a través de hábitos alimentarios saludables.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-users"></i> Nuestro Equipo</h3>
                                    <p>Contamos con un equipo multidisciplinario de profesionales de la salud, nutricionistas, desarrolladores de software y expertos en educación, comprometidos con mejorar la nutrición infantil en el país.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-chart-line"></i> Impacto</h3>
                                    <p>Según estudios del INEI (2023), la anemia infantil afecta a más del 40% de niños menores de 3 años en algunas regiones del Perú. Nuestro proyecto busca reducir esta cifra mediante intervenciones personalizadas y seguimiento continuo.</p>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-award"></i> Reconocimientos</h3>
                                    <p>Proyecto seleccionado por la Universidad de Piura como iniciativa de impacto social en el programa de Ingeniería Industrial y de Sistemas.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,
                
                /* Contenido del Modal "Servicios" */
                servicesModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Nuestros Servicios</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-utensils"></i> Planes de Alimentación Personalizados</h3>
                                    <p>Desarrollamos planes nutricionales adaptados a las necesidades específicas de cada niño, considerando:</p>
                                    <ul>
                                        <li>Edad y estado de salud</li>
                                        <li>Disponibilidad de alimentos locales</li>
                                        <li>Hábitos culturales y preferencias familiares</li>
                                        <li>Capacidad económica del hogar</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-chart-line"></i> Seguimiento Nutricional</h3>
                                    <p>Monitoreamos el progreso de cada niño a través de:</p>
                                    <ul>
                                        <li>Registro diario de consumo alimentario</li>
                                        <li>Evaluación periódica de indicadores de salud</li>
                                        <li>Ajustes automáticos según resultados obtenidos</li>
                                        <li>Reportes mensuales para padres y tutores</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-graduation-cap"></i> Educación Nutricional</h3>
                                    <p>Ofrecemos material educativo en múltiples formatos:</p>
                                    <ul>
                                        <li>Recetas prácticas con ingredientes locales</li>
                                        <li>Videos tutoriales de preparación</li>
                                        <li>Guías informativas sobre nutrientes esenciales</li>
                                        <li>Consejos para mejorar hábitos alimentarios</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-users"></i> Comunidad de Apoyo</h3>
                                    <p>Conectamos a las familias con:</p>
                                    <ul>
                                        <li>Nutricionistas y profesionales de la salud</li>
                                        <li>Otras familias que comparten experiencias</li>
                                        <li>Foros de discusión y consejos prácticos</li>
                                        <li>Eventos virtuales de capacitación</li>
                                    </ul>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-mobile-alt"></i> Accesibilidad</h3>
                                    <p>Nuestra plataforma funciona en modo offline y cuenta con versión ligera para zonas con conectividad limitada.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,

                /* Contenido del Modal "Preguntas Frecuentes" */
                faqModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Preguntas Frecuentes</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-question-circle"></i> ¿Qué es Yachay Mikuy?</h3>
                                    <p>Yachay Mikuy es una plataforma digital que ofrece planes de alimentación personalizados para combatir la anemia infantil en Perú, combinando tecnología, educación y nutrición culturalmente adaptada.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-child"></i> ¿Para qué edades está diseñada la plataforma?</h3>
                                    <p>Nuestra plataforma está diseñada para niños de 0 a 13 años, etapa crucial en el desarrollo donde los hábitos alimentarios se consolidan y se pueden prevenir deficiencias nutricionales a largo plazo.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-plus"></i> ¿Cómo puedo registrarme?</h3>
                                    <p>Puedes registrarte haciendo clic en el botón "Comenzar Ahora" en nuestra página principal y completando el formulario con tus datos personales. El proceso es rápido y seguro.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-shield-alt"></i> ¿Es seguro compartir los datos de mis hijos?</h3>
                                    <p>Sí, implementamos medidas avanzadas de protección de datos:</p>
                                    <ul>
                                        <li>Cifrado de extremo a extremo</li>
                                        <li>Consentimiento parental explícito</li>
                                        <li>Cumplimiento con normativas de protección de datos</li>
                                        <li>Acceso restringido solo a personal autorizado</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-heartbeat"></i> ¿Cómo funciona el seguimiento nutricional?</h3>
                                    <p>A través de nuestra aplicación, puedes registrar el consumo alimentario de tus hijos y nosotros monitoreamos su progreso. El sistema genera alertas y recomendaciones automáticas según los resultados obtenidos.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-dollar-sign"></i> ¿Qué costo tiene el servicio?</h3>
                                    <p>Ofrecemos diferentes planes de suscripción:</p>
                                    <ul>
                                        <li>Plan básico: S/10-15 mensuales</li>
                                        <li>Plan premium con atención personalizada</li>
                                        <li>Subsidios para familias vulnerables mediante alianzas</li>
                                        <li>Acceso gratuito en centros educativos convenidos</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-wifi"></i> ¿Funciona sin internet?</h3>
                                    <p>Sí, contamos con modo offline que permite:</p>
                                    <ul>
                                        <li>Acceso a recetas y guías descargadas</li>
                                        <li>Registro de consumo para sincronizar después</li>
                                        <li>Notificaciones vía SMS para zonas rurales</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-hands-helping"></i> ¿Cómo obtengo ayuda si tengo problemas?</h3>
                                    <p>Puedes contactarnos a través de:</p>
                                    <ul>
                                        <li>Chat en vivo en la aplicación</li>
                                        <li>Correo electrónico: yachay.mikuy@gmail.com</li>
                                        <li>Teléfono: +51 918 072 862</li>
                                        <li>WhatsApp: +51 918 072 862</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>`,

                /* Contenido del Modal "Política de Privacidad" */
                privacyModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Política de Privacidad</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-info-circle"></i> Información que Recopilamos</h3>
                                    <p>Recopilamos información personal y de salud de manera responsable:</p>
                                    <ul>
                                        <li><strong>Datos personales:</strong> Nombre, correo electrónico, teléfono, departamento de residencia</li>
                                        <li><strong>Datos de los niños:</strong> Nombre, fecha de nacimiento, peso, altura, historial médico relevante</li>
                                        <li><strong>Datos de uso:</strong> Interacciones con la plataforma, preferencias alimentarias, progreso nutricional</li>
                                        <li><strong>Datos técnicos:</strong> Dirección IP, tipo de dispositivo, navegador utilizado</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-cogs"></i> Uso de la Información</h3>
                                    <p>Utilizamos tu información para:</p>
                                    <ul>
                                        <li>Proporcionar planes de alimentación personalizados</li>
                                        <li>Realizar seguimiento nutricional efectivo</li>
                                        <li>Mejorar continuamente nuestros servicios</li>
                                        <li>Comunicarnos contigo sobre actualizaciones relevantes</li>
                                        <li>Generar reportes estadísticos anonimizados</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-lock"></i> Protección de Datos</h3>
                                    <p>Implementamos medidas de seguridad robustas:</p>
                                    <ul>
                                        <li>Cifrado SSL/TLS para todas las transmisiones</li>
                                        <li>Almacenamiento cifrado en servidores seguros</li>
                                        <li>Autenticación de dos factores para accesos críticos</li>
                                        <li>Auditorías de seguridad periódicas</li>
                                        <li>Backups automáticos y recovery plan</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-shield"></i> Derechos de los Usuarios</h3>
                                    <p>Tienes derecho a:</p>
                                    <ul>
                                        <li><strong>Acceder:</strong> Solicitar una copia de tus datos personales</li>
                                        <li><strong>Rectificar:</strong> Corregir información inexacta o incompleta</li>
                                        <li><strong>Cancelar:</strong> Solicitar la eliminación de tus datos</li>
                                        <li><strong>Oponerse:</strong> Restringir el procesamiento de tus datos</li>
                                        <li><strong>Portabilidad:</strong> Transferir tus datos a otro servicio</li>
                                    </ul>
                                    <p>Para ejercer estos derechos, contacta a yachay.mikuy@gmail.com</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-friends"></i> Consentimiento Parental</h3>
                                    <p>Para el tratamiento de datos de menores:</p>
                                    <ul>
                                        <li>Requerimos consentimiento explícito de padres o tutores</li>
                                        <li>Los padres son responsables de la veracidad de los datos</li>
                                        <li>Podemos solicitar documentación adicional si es necesario</li>
                                        <li>Los padres pueden revocar el consentimiento en cualquier momento</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-clock"></i> Retención de Datos</h3>
                                    <p>Conservamos los datos según los siguientes criterios:</p>
                                    <ul>
                                        <li>Datos de cuenta: mientras la cuenta esté activa</li>
                                        <li>Datos de salud: mínimo 5 años después del último uso</li>
                                        <li>Datos financieros: 7 años según normativa fiscal</li>
                                        <li>Datos anonimizados: indefinidamente para estadísticas</li>
                                    </ul>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-exclamation-triangle"></i> Importante</h3>
                                    <p>Esta política se actualiza periódicamente. Te notificaremos cualquier cambio significativo a través de tu correo electrónico registrado.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,

                /* Contenido del Modal "Términos y Condiciones" */
                termsModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Términos y Condiciones</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-check-circle"></i> Aceptación de los Términos</h3>
                                    <p>Al utilizar la plataforma Yachay Mikuy, aceptas estos términos y condiciones en su totalidad. Si no estás de acuerdo con alguno de estos términos, no debes utilizar nuestros servicios.</p>
                                    <p>El uso continuado de la plataforma después de cualquier modificación constituye aceptación de los nuevos términos.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-cube"></i> Descripción del Servicio</h3>
                                    <p>Yachay Mikuy es una plataforma digital que ofrece:</p>
                                    <ul>
                                        <li>Planes de alimentación personalizados para niños de 0 a 13 años</li>
                                        <li>Seguimiento nutricional continuo</li>
                                        <li>Educación nutricional adaptada culturalmente</li>
                                        <li>Comunidad de apoyo para padres y cuidadores</li>
                                        <li>Acceso a profesionales de la salud</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-check"></i> Responsabilidades del Usuario</h3>
                                    <p>Como usuario, te comprometes a:</p>
                                    <ul>
                                        <li>Proporcionar información veraz y actualizada</li>
                                        <li>Mantener la confidencialidad de tus credenciales de acceso</li>
                                        <li>Seguir las recomendaciones nutricionales de manera responsable</li>
                                        <li>No compartir contenido inapropiado u ofensivo</li>
                                        <li>Respetar los derechos de otros usuarios</li>
                                        <li>Reportar cualquier problema o incidencia</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-ban"></i> Uso Prohibido</h3>
                                    <p>Está estrictamente prohibido:</p>
                                    <ul>
                                        <li>Utilizar la plataforma para fines comerciales no autorizados</li>
                                        <li>Intentar acceder a cuentas de otros usuarios</li>
                                        <li>Distribuir malware o software malicioso</li>
                                        <li>Violentar la propiedad intelectual de Yachay Mikuy</li>
                                        <li>Proporcionar información médica falsa o engañosa</li>
                                        <li>Acosar o intimidar a otros usuarios</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-copyright"></i> Propiedad Intelectual</h3>
                                    <p>Todo el contenido de la plataforma está protegido por derechos de autor:</p>
                                    <ul>
                                        <li>Textos, imágenes, diseños, logotipos y software</li>
                                        <li>Algoritmos de recomendación nutricional</li>
                                        <li>Base de datos de recetas y alimentos</li>
                                        <li>Material educativo y formatos originales</li>
                                    </ul>
                                    <p>Queda prohibida la reproducción total o parcial sin autorización expresa.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-heart"></i> Información Médica</h3>
                                    <p>Importante considerar:</p>
                                    <ul>
                                        <li>Yachay Mikuy no reemplaza la consulta médica profesional</li>
                                        <li>Las recomendaciones son complementarias al tratamiento médico</li>
                                        <li>Ante cualquier emergencia médica, contacta a servicios de salud</li>
                                        <li>Los planes nutricionales deben ser supervisados por profesionales</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-exclamation-triangle"></i> Limitación de Responsabilidad</h3>
                                    <p>Yachay Mikuy no se responsabiliza por:</p>
                                    <ul>
                                        <li>El uso indebido de la plataforma por parte de los usuarios</li>
                                        <li>Consecuencias derivadas de no seguir adecuadamente las recomendaciones</li>
                                        <li>Problemas técnicos fuera de nuestro control</li>
                                        <li>Contenido proporcionado por terceros</li>
                                        <li>Daños indirectos, incidentales o consecuentes</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-sync-alt"></i> Modificaciones de los Términos</h3>
                                    <p>Yachay Mikuy se reserva el derecho de:</p>
                                    <ul>
                                        <li>Modificar estos términos y condiciones en cualquier momento</li>
                                        <li>Actualizar las políticas de privacidad y uso de datos</li>
                                        <li>Cambiar las características y funcionalidades del servicio</li>
                                        <li>Suspender o terminar servicios por razones justificadas</li>
                                    </ul>
                                    <p>Las modificaciones entrarán en vigor desde su publicación en la plataforma.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-gavel"></i> Ley Aplicable y Jurisdicción</h3>
                                    <p>Estos términos se rigen por las leyes de la República del Perú. Cualquier disputa será resuelta en los tribunales de Lima, Perú.</p>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-calendar-alt"></i> Vigencia</h3>
                                    <p>Estos términos y condiciones entran en vigor a partir del 1 de enero de 2025 y permanecerán vigentes hasta su modificación.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,
            };

            // Escucha global de clics para manejar la apertura y cierre de modales
            document.body.addEventListener('click', (e) => {
                // Lógica para ABRIR el modal según el ID del enlace del footer
                if (e.target.matches('#aboutLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.aboutModal()); 
                } else if (e.target.matches('#servicesLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.servicesModal()); 
                } else if (e.target.matches('#faqLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.faqModal()); 
                } else if (e.target.matches('#privacyLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.privacyModal()); 
                } else if (e.target.matches('#termsLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.termsModal()); 
                }

                // Lógica para CERRAR el modal:
                // Si el clic es en el fondo negro (.modal) o en el botón de cerrar (.close-modal)
                if (e.target.matches('.modal') || e.target.matches('.close-modal')) { 
                    ui.closeModal(); 
                }
            });
        });
    </script>
</body>
</html>
