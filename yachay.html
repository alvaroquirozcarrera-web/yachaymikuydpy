<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Familiar - Yachay Mikuy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #2c5aa0;
            --light-blue: #5d8cc4;
            --dark-blue: #1a3a6e;
            --success-green: #28a745;
            --success-green-dark: #218838;
            --accent-orange: #ff9800;
            --accent-orange-dark: #e08e0b;
            --accent-purple: #6f42c1;
            --accent-purple-dark: #5a32a3;
            --accent-teal: #20c997;
            --accent-teal-dark: #1aa27d;
            --accent-pink: #d63384;
            --accent-pink-dark: #b02a6e;
            --accent-cyan: #0dcaf0;
            --accent-cyan-dark: #0baccc;
            --gray: #6c757d;
            --light-gray: #f8f9fa;
            --white: #ffffff;
            --shadow-color: rgba(40, 50, 70, 0.1);
            --danger-red: #dc3545;
            --danger-red-dark: #c82333;
            
            /* Variables para el footer */
            --text-dark: #212529;
            --shadow: 0 8px 24px rgba(0, 0, 0, 0.08); 
            --radius: 12px;
            --transition: all 0.3s ease-in-out;
            --accent-red-footer: #e63946;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background-image: linear-gradient(120deg, #f5f9ff 0%, #e6f0fa 100%);
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Barra superior fija con logo y bot√≥n de volver */
        .top-bar {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: var(--white);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .top-bar .logo {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .top-bar .logo i {
            margin-right: 10px;
            color: var(--accent-orange);
        }

        .btn-back-top {
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-back-top:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            padding-top: 20px;
            flex: 1;
        }

        /* --- ESTILO PARA EL ENCABEZADO GRUPAL --- */
        .group-header {
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 8px 30px var(--shadow-color);
            padding: 30px 40px;
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 8px solid var(--accent-purple);
        }

        .group-header-content {
            text-align: center;
            flex: 1;
        }

        .group-header-icon {
            font-size: 3rem;
            color: var(--accent-purple);
            margin-bottom: 15px;
        }

        .group-header h1 {
            color: var(--dark-blue);
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .group-header p {
            color: var(--gray);
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .children-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .child-tag {
            background-color: rgba(93, 140, 196, 0.1);
            color: var(--primary-blue);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .child-tag:hover {
            background-color: rgba(93, 140, 196, 0.2);
            transform: translateY(-2px);
        }

        .btn-exit {
            padding: 12px 25px;
            background: linear-gradient(45deg, var(--danger-red), #e85d75);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-exit:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
            background: linear-gradient(45deg, var(--danger-red-dark), var(--danger-red));
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
        }

        .dashboard-card {
            background-color: var(--white);
            border-radius: 20px;
            box-shadow: 0 8px 30px var(--shadow-color);
            padding: 30px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease-in-out;
            border-top: 5px solid transparent;
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
            position: relative;
            overflow: hidden;
        }
        
        .dashboard-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .dashboard-card:nth-child(1) { animation-delay: 0.1s; }
        .dashboard-card:nth-child(2) { animation-delay: 0.2s; }
        .dashboard-card:nth-child(3) { animation-delay: 0.3s; }
        .dashboard-card:nth-child(4) { animation-delay: 0.4s; }
        .dashboard-card:nth-child(5) { animation-delay: 0.5s; }
        .dashboard-card:nth-child(6) { animation-delay: 0.6s; }

        .dashboard-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 40px rgba(40, 50, 70, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--white);
            font-size: 1.8rem;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-blue);
        }

        .card-description {
            color: var(--gray);
            font-weight: 400;
            margin-bottom: 25px;
            flex-grow: 1;
            position: relative;
            z-index: 1;
        }

        .card-content {
            margin-top: auto;
            position: relative;
            z-index: 1;
        }

        .profile-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(111, 66, 193, 0.1);
            color: var(--accent-purple);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .region-selector, .btn-action {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
        }

        .region-selector {
            border: 2px solid #ddd;
            background-color: var(--light-gray);
            color: var(--dark-blue);
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-5'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            margin-bottom: 15px;
        }

        .btn-action {
            border: none;
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .card-pantry { border-top-color: var(--success-green); }
        .card-pantry .card-icon { background: linear-gradient(45deg, var(--success-green), #58c271); }
        .card-pantry .btn-action { background: linear-gradient(45deg, var(--success-green), #58c271); }

        .card-region { border-top-color: var(--accent-orange); }
        .card-region .card-icon { background: linear-gradient(45deg, var(--accent-orange), #ffb74d); }
        .card-region .btn-action { background: linear-gradient(45deg, var(--accent-orange), #ffb74d); }
        
        .card-wellness { border-top-color: var(--accent-purple); }
        .card-wellness .card-icon { background: linear-gradient(45deg, var(--accent-purple), #9575cd); }
        .card-wellness .btn-action { background: linear-gradient(45deg, var(--accent-purple), #9575cd); }

        .card-academic { border-top-color: var(--accent-teal); }
        .card-academic .card-icon { background: linear-gradient(45deg, var(--accent-teal), #4dd9b4); }
        .card-academic .btn-action { background: linear-gradient(45deg, var(--accent-teal), #4dd9b4); }
        
        .card-games { border-top-color: var(--accent-pink); }
        .card-games .card-icon { background: linear-gradient(45deg, var(--accent-pink), #f06292); }
        .card-games .btn-action { background: linear-gradient(45deg, var(--accent-pink), #f06292); }

        .card-daily { border-top-color: var(--accent-cyan); }
        .card-daily .card-icon { background: linear-gradient(45deg, var(--accent-cyan), #4dd0e1); }
        .card-daily .btn-action { background: linear-gradient(45deg, var(--accent-cyan), #4dd0e1); }

        /* --- ESTILOS DEL FOOTER --- */
        .footer {
            background-color: var(--primary-blue);
            color: var(--white);
            padding: 40px 20px 10px;
            margin-top: auto;
        }
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding-bottom: 20px;
        }
        .footer-section h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
            border-bottom: 2px solid var(--accent-red-footer);
            padding-bottom: 5px;
            display: inline-block;
        }
        .social-links a {
            color: var(--white);
            font-size: 1.5rem;
            margin-right: 15px;
            transition: var(--transition);
        }
        .social-links a:hover {
            color: var(--accent-red-footer);
            transform: scale(1.1);
        }
        .footer-section p {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .footer-section p i {
            margin-right: 10px;
            color: var(--accent-red-footer);
        }
        .footer-links {
            list-style: none;
        }
        .footer-links a {
            color: var(--white);
            text-decoration: none;
            font-size: 0.95rem;
            transition: var(--transition);
            display: block; 
        }
        .footer-links a:hover {
            color: var(--accent-red-footer);
            padding-left: 5px;
        }
        .footer-links a i {
            margin-right: 10px;
        }
        .footer-bottom {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
            padding: 15px 0 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85rem;
            font-weight: 300;
        }
        
        /* --- ESTILOS DEL MODAL (FLOTANTE Y CENTRADO) --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Fondo semi-transparente negro */
            display: flex;
            justify-content: center;
            align-items: center; /* Centrado vertical y horizontal */
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        /* Contenido Central del Modal (Fondo Blanco) */
        .modal-content {
            background-color: var(--white); 
            color: var(--text-dark);
            padding: 30px;
            border-radius: var(--radius);
            max-width: 800px;
            width: 90%;
            max-height: 95vh; /* Limita la altura de la caja blanca para que siempre quepa */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-50px);
            transition: transform 0.3s ease;
            margin: 20px auto; /* Centrado horizontal y margen vertical */
            display: flex;
            flex-direction: column;
        }
        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            /* Se mantiene fijo */
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--dark-gray);
            padding-bottom: 15px;
            margin-bottom: 20px;
            flex-shrink: 0; /* Asegura que no se encoja cuando el body haga scroll */
        }
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
            transition: var(--transition);
        }
        .close-modal:hover {
            color: var(--accent-red-footer);
            transform: rotate(90deg);
        }
        
        /* Contenedor de Contenido con Deslizador (La clave para la est√©tica) */
        .modal-body {
            line-height: 1.6;
            font-size: 0.95rem;
            max-height: 70vh; /* Altura m√°xima para el contenido con scroll */
            overflow-y: auto; /* **ACTIVA EL SCROLL VERTICAL** */
            padding-right: 15px; /* Espacio para el deslizador */
            margin-right: -15px; /* Compensa el padding para que el contenido quede centrado */
            flex-grow: 1; /* Permite que ocupe el espacio restante */
        }

        /* Estilos internos del contenido */
        .modal-body h3 {
            color: var(--primary-blue);
            margin-top: 20px;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.2rem;
        }
        .modal-body i {
            margin-right: 8px;
            color: var(--accent-red-footer);
        }
        .content-section {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 3px solid var(--accent-red-footer);
            background-color: var(--light-gray);
            border-radius: 0 5px 5px 0;
        }
        .content-section ul {
            padding-left: 20px;
        }
        .content-section li {
            list-style: disc;
            margin-bottom: 5px;
        }
        .highlight-box {
            background-color: #ffe5e8;
            padding: 15px;
            border-radius: var(--radius);
            border: 1px solid var(--accent-red-footer);
            margin-top: 30px;
        }

        /* Modal de detalles del ni√±o */
        .child-details-modal .modal-content {
            max-width: 600px;
        }
        .child-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .child-detail-label {
            font-weight: 600;
            color: var(--dark-blue);
        }
        .child-detail-value {
            color: var(--gray);
        }
        .responses-summary {
            margin-top: 20px;
        }
        .responses-summary h4 {
            color: var(--primary-blue);
            margin-bottom: 15px;
        }
        .response-item {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .response-question {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .response-answer {
            color: var(--gray);
        }

        @media (max-width: 768px) {
            .container { 
                padding: 20px; 
                padding-top: 10px;
            }
            .top-bar {
                padding: 12px 15px;
            }
            .top-bar .logo {
                font-size: 1.2rem;
            }
            .btn-back-top {
                padding: 8px 15px;
                font-size: 0.8rem;
            }
            .group-header { 
                padding: 25px; 
                flex-direction: column;
                gap: 20px;
            }
            .group-header h1 { font-size: 2rem; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .btn-exit {
                align-self: center;
            }
        }
    </style>
</head>
<body>
    <!-- Barra superior con logo y bot√≥n de volver -->
    <div class="top-bar">
        <div class="logo">
            <i class="fas fa-apple-alt"></i>
            Yachay Mikuy
        </div>
        <a href="index.html#perfiles-de-tus-hijos" class="btn-back-top">
            <i class="fas fa-arrow-left"></i> Volver
        </a>
    </div>

    <div class="container">
        <header class="group-header">
            <div class="group-header-content">
                <div class="group-header-icon"><i class="fas fa-users"></i></div>
                <h1>Panel de Planificaci√≥n Familiar</h1>
                <p>Gestionando el bienestar de:</p>
                <div class="children-list" id="childrenListContainer">
                </div>
            </div>
            <a href="index.html" class="btn-exit">
                <i class="fas fa-sign-out-alt"></i> Salir
            </a>
        </header>

        <main class="dashboard-grid">
            <div class="dashboard-card card-pantry">
                <div class="profile-indicator">
                    <i class="fas fa-users"></i> Panel familiar
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-shopping-basket"></i></div>
                    <h2 class="card-title">Comida con Despensa</h2>
                </div>
                <p class="card-description">Genera planes de comidas para toda la familia utilizando los ingredientes disponibles en casa.</p>
                <div class="card-content">
                    <a href="#" id="pantryLink" class="btn-action">
                        <i class="fas fa-utensils"></i> Empezar
                    </a>
                </div>
            </div>

            <div class="dashboard-card card-region">
                <div class="profile-indicator">
                    <i class="fas fa-users"></i> Panel familiar
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-map-marked-alt"></i></div>
                    <h2 class="card-title">Comida por Regi√≥n</h2>
                </div>
                <p class="card-description">Descubre platos y dietas basadas en los alimentos t√≠picos de cada departamento del Per√∫.</p>
                <div class="card-content">
                    <select id="regionSelector" class="region-selector" name="departamento">
                        <option value="">Selecciona un departamento</option>
                    </select>
                    <button id="regionButton" class="btn-action">
                        <i class="fas fa-search-location"></i> Generar
                    </button>
                </div>
            </div>

            <div class="dashboard-card card-wellness">
                <div class="profile-indicator">
                    <i class="fas fa-users"></i> Panel familiar
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-brain"></i></div>
                    <h2 class="card-title">Bienestar Psicol√≥gico</h2>
                </div>
                <p class="card-description">Accede a consejos y actividades para fomentar el desarrollo emocional de todos los ni√±os.</p>
                <div class="card-content">
                    <a href="#" id="wellnessLink" class="btn-action">
                        <i class="fas fa-lightbulb"></i> Ver Recomendaciones
                    </a>
                </div>
            </div>

            <div class="dashboard-card card-academic">
                <div class="profile-indicator">
                    <i class="fas fa-users"></i> Panel familiar
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-book-reader"></i></div>
                    <h2 class="card-title">Apoyo Acad√©mico</h2>
                </div>
                <p class="card-description">Encuentra estrategias y recomendaciones para potenciar el rendimiento acad√©mico familiar.</p>
                <div class="card-content">
                    <a href="#" id="academicLink" class="btn-action">
                        <i class="fas fa-graduation-cap"></i> Explorar Estrategias
                    </a>
                </div>
            </div>
            
            <div class="dashboard-card card-games">
                <div class="profile-indicator">
                    <i class="fas fa-users"></i> Panel familiar
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-puzzle-piece"></i></div>
                    <h2 class="card-title">Jugando es Divertido</h2>
                </div>
                <p class="card-description">Descubre juegos educativos para estimular la mente y creatividad de tus hijos.</p>
                <div class="card-content">
                    <a href="#" id="gamesLink" class="btn-action">
                        <i class="fas fa-gamepad"></i> Ver Juegos
                    </a>
                </div>
            </div>
            
            <div class="dashboard-card card-daily">
                <div class="profile-indicator">
                    <i class="fas fa-users"></i> Panel familiar
                </div>
                <div class="card-header">
                    <div class="card-icon"><i class="fas fa-plate-wheat"></i></div>
                    <h2 class="card-title">Platos del D√≠a</h2>
                </div>
                <p class="card-description">Recibe recomendaciones diarias de platos balanceados para toda la familia.</p>
                <div class="card-content">
                    <a href="#" id="dailyLink" class="btn-action">
                        <i class="fas fa-calendar-day"></i> Consultar
                    </a>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Redes Sociales</h3>
                <div class="social-links">
                    <a href="https://facebook.com/yachaymikuy" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://twitter.com/yachaymikuy" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="https://instagram.com/yachaymikuy" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://youtube.com/channel/yachaymikuy" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="https://wa.me/51918072862" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Contacto</h3>
                <p><i class="fas fa-envelope"></i> yachay.mikuy@gmail.com</p>
                <p><i class="fas fa-phone"></i> +51 918 072 862</p>
                <p><i class="fas fa-map-marker-alt"></i> Lima - Per√∫</p>
            </div>
            <div class="footer-section">
                <h3>Enlaces √ötiles</h3>
                <ul class="footer-links">
                    <li><a href="#" id="aboutLink"><i class="fas fa-info-circle"></i> Acerca de Nosotros</a></li>
                    <li><a href="#" id="servicesLink"><i class="fas fa-concierge-bell"></i> Servicios</a></li>
                    <li><a href="#" id="faqLink"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a></li>
                    <li><a href="#" id="privacyLink"><i class="fas fa-shield-alt"></i> Pol√≠tica de Privacidad</a></li>
                    <li><a href="#" id="termsLink"><i class="fas fa-file-contract"></i> T√©rminos y Condiciones</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">&copy; 2025 Yachay Mikuy. Todos los derechos reservados.</div>
    </footer>

    <div id="actionModalContainer"></div>

    <script>
        // Storage Adapter - Para facilitar migraci√≥n a backend
        const storageAdapter = {
            // Users
            getUsers: function() {
                const users = localStorage.getItem('yachay_users');
                return users ? JSON.parse(users) : [];
            },
            saveUsers: function(users) {
                localStorage.setItem('yachay_users', JSON.stringify(users));
            },
            
            // Children
            getChildren: function() {
                const children = localStorage.getItem('yachay_children');
                return children ? JSON.parse(children) : [];
            },
            saveChildren: function(children) {
                localStorage.setItem('yachay_children', JSON.stringify(children));
            },
            
            // Responses
            getResponses: function() {
                const responses = localStorage.getItem('yachay_responses');
                return responses ? JSON.parse(responses) : {};
            },
            saveResponses: function(responses) {
                localStorage.setItem('yachay_responses', JSON.stringify(responses));
            },
            
            // Session
            getSession: function() {
                const session = localStorage.getItem('yachay_session');
                return session ? JSON.parse(session) : { currentUserId: null, exploringAsGuest: false, lastActiveAt: null };
            },
            saveSession: function(session) {
                localStorage.setItem('yachay_session', JSON.stringify(session));
            },
            
            // Audit Log
            getAuditLog: function() {
                const auditLog = localStorage.getItem('yachay_auditLog');
                return auditLog ? JSON.parse(auditLog) : [];
            },
            saveAuditLog: function(auditLog) {
                localStorage.setItem('yachay_auditLog', JSON.stringify(auditLog));
            }
        };

        // Funci√≥n para calcular la edad a partir de la fecha de nacimiento
        function calculateAge(dob) {
            const birthDate = new Date(dob);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }

        // Funci√≥n para obtener par√°metros de la URL
        function getURLParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const guestMode = urlParams.get('guest') === 'true';
            const showCompletion = urlParams.get('showCompletion') === 'true';
            const userId = urlParams.get('userId');

            // Verificar si estamos en modo invitado o con cuenta
            const session = storageAdapter.getSession();
            let isGuestMode = guestMode || session.exploringAsGuest;

            // Cargar los datos de TODOS los ni√±os desde localStorage
            let allChildrenData = storageAdapter.getChildren();
            
            if (!allChildrenData || allChildrenData.length === 0) {
                // Si no hay datos, crear los ni√±os de ejemplo si estamos en modo invitado
                if (isGuestMode) {
                    createGuestChildrenIfNotExists();
                    allChildrenData = storageAdapter.getChildren();
                } else {
                    document.body.innerHTML = '<h1>Error: No se encontraron datos de ni√±os. Por favor, complete al menos un cuestionario.</h1>';
                    return;
                }
            }
            
            // Filtrar para usar solo los perfiles que han completado el cuestionario
            let completedChildren;
            
            if (isGuestMode) {
                // Modo invitado: mostrar solo los perfiles de invitado (Alvaro y Luz)
                completedChildren = allChildrenData.filter(child => child.ownerId === null && child.progressPercent === 100);
            } else {
                // Modo con cuenta: mostrar los perfiles del usuario actual
                if (session.currentUserId) {
                    completedChildren = allChildrenData.filter(child => 
                        child.ownerId === session.currentUserId && child.progressPercent === 100
                    );
                } else {
                    completedChildren = [];
                }
            }

            if (completedChildren.length === 0) {
                document.body.innerHTML = '<h1>No hay perfiles completados. Por favor, finalice al menos un cuestionario para continuar.</h1>';
                return;
            }

            // Poblar la lista de ni√±os en el encabezado
            const childrenListContainer = document.getElementById('childrenListContainer');
            completedChildren.forEach(child => {
                const childTag = document.createElement('span');
                childTag.className = 'child-tag';
                childTag.innerHTML = `<i class="fas fa-child"></i> ${child.name}`;
                childTag.addEventListener('click', () => showChildDetails(child));
                childrenListContainer.appendChild(childTag);
            });
            
            // Configurar los enlaces de los tableros
            const guestParam = isGuestMode ? '?guest=true' : '';
            document.getElementById('pantryLink').href = `nino1.html${guestParam}`;
            document.getElementById('wellnessLink').href = `nino3.html${guestParam}`;
            document.getElementById('academicLink').href = `nino4.html${guestParam}`;
            document.getElementById('gamesLink').href = `nino5.html${guestParam}`;
            document.getElementById('dailyLink').href = `nino6.html${guestParam}`;
            
            // Poblar el selector de departamentos
            const departments = [
                "Amazonas", "√Åncash", "Apur√≠mac", "Arequipa", "Ayacucho", "Cajamarca", 
                "Callao", "Cusco", "Huancavelica", "Hu√°nuco", "Ica", "Jun√≠n", 
                "La Libertad", "Lambayeque", "Lima", "Loreto", "Madre de Dios", 
                "Moquegua", "Pasco", "Piura", "Puno", "San Mart√≠n", "Tacna", 
                "Tumbes", "Ucayali"
            ];
            
            const regionSelector = document.getElementById('regionSelector');
            departments.forEach(dept => {
                const option = document.createElement('option');
                option.value = dept.toLowerCase().replace(/√°/g, 'a').replace(/\s+/g, '-');
                option.textContent = dept;
                regionSelector.appendChild(option);
            });

            // Configurar el bot√≥n del tablero de regi√≥n
            const regionButton = document.getElementById('regionButton');
            regionButton.addEventListener('click', function() {
                const selectedDepartment = regionSelector.value;
                if (selectedDepartment) {
                    // Redirigir a nino2.html con el departamento y el par√°metro de invitado si es necesario
                    window.location.href = `nino2.html?departamento=${selectedDepartment}${guestParam}`;
                } else {
                    alert('Por favor, selecciona un departamento antes de generar.');
                }
            });

            // Funci√≥n para mostrar detalles del ni√±o
            function showChildDetails(child) {
                const responses = storageAdapter.getResponses();
                const childResponses = responses[child.id] || {};
                
                // Crear modal con detalles del ni√±o
                const modalHtml = `
                    <div class="modal active child-details-modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Detalles de ${child.name}</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="child-detail-item">
                                    <span class="child-detail-label">Edad:</span>
                                    <span class="child-detail-value">${calculateAge(child.dob)} a√±os</span>
                                </div>
                                <div class="child-detail-item">
                                    <span class="child-detail-label">Fecha de nacimiento:</span>
                                    <span class="child-detail-value">${new Date(child.dob).toLocaleDateString()}</span>
                                </div>
                                <div class="child-detail-item">
                                    <span class="child-detail-label">Sexo:</span>
                                    <span class="child-detail-value">${child.sex === 'male' ? 'Masculino' : child.sex === 'female' ? 'Femenino' : 'Otro'}</span>
                                </div>
                                <div class="child-detail-item">
                                    <span class="child-detail-label">Progreso del cuestionario:</span>
                                    <span class="child-detail-value">${child.progressPercent}%</span>
                                </div>
                                
                                <div class="responses-summary">
                                    <h4>Resumen de respuestas importantes:</h4>
                                    ${getImportantResponses(childResponses)}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('actionModalContainer').innerHTML = modalHtml;
                
                // Agregar event listener para cerrar el modal
                document.querySelector('.close-modal').addEventListener('click', function() {
                    document.getElementById('actionModalContainer').innerHTML = '';
                });
                
                // Cerrar al hacer clic fuera del modal
                document.querySelector('.modal').addEventListener('click', function(e) {
                    if (e.target === this) {
                        document.getElementById('actionModalContainer').innerHTML = '';
                    }
                });
            }
            
            // Funci√≥n para obtener respuestas importantes
            function getImportantResponses(childResponses) {
                const importantQuestions = {
                    'q1': 'Peso actual',
                    'q2': 'Estatura actual',
                    'q13': 'Desayuno habitual',
                    'q15': 'Almuerzo habitual',
                    'q17': 'Porciones de fruta al d√≠a',
                    'q21': 'Consumo de agua',
                    'q28': 'Actividad f√≠sica',
                    'q34': 'Horas de sue√±o',
                    'q48': 'Estado emocional'
                };
                
                let html = '';
                for (const [questionId, questionLabel] of Object.entries(importantQuestions)) {
                    if (childResponses[questionId]) {
                        html += `
                            <div class="response-item">
                                <div class="response-question">${questionLabel}:</div>
                                <div class="response-answer">${childResponses[questionId].value}</div>
                            </div>
                        `;
                    }
                }
                
                if (html === '') {
                    html = '<p>No hay respuestas registradas</p>';
                }
                
                return html;
            }

            // Funci√≥n para crear ni√±os de ejemplo si no existen
            function createGuestChildrenIfNotExists() {
                let childrenData = storageAdapter.getChildren();
                
                // Verificar si ya existen los ni√±os de ejemplo
                const hasAlvaro = childrenData.some(child => child.name === 'Alvaro');
                const hasLuz = childrenData.some(child => child.name === 'Luz');
                
                if (!hasAlvaro) {
                    childrenData.push({
                        id: 'alvaro-' + Date.now(),
                        name: 'Alvaro',
                        dob: '2017-08-10',
                        sex: 'male',
                        avatarCustomization: '1',
                        theme: 'default',
                        ownerId: null,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                        progressPercent: 100,
                        deletedAt: null,
                        version: 1
                    });
                }
                
                if (!hasLuz) {
                    childrenData.push({
                        id: 'luz-' + Date.now(),
                        name: 'Luz',
                        dob: '2019-12-05',
                        sex: 'female',
                        avatarCustomization: '2',
                        theme: 'default',
                        ownerId: null,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString(),
                        progressPercent: 100,
                        deletedAt: null,
                        version: 1
                    });
                }
                
                storageAdapter.saveChildren(childrenData);
                
                // Crear respuestas para los perfiles predefinidos
                const responses = storageAdapter.getResponses();
                
                if (!responses['alvaro-' + Date.now()]) {
                    responses['alvaro-' + Date.now()] = {};
                    for (let i = 1; i <= 50; i++) {
                        responses['alvaro-' + Date.now()][`q${i}`] = {
                            type: 'select',
                            value: i % 5 === 0 ? 'Opci√≥n 5' : `Opci√≥n ${i % 5}`,
                            timestamp: new Date().toISOString(),
                            version: 1
                        };
                    }
                }
                
                if (!responses['luz-' + Date.now()]) {
                    responses['luz-' + Date.now()] = {};
                    for (let i = 1; i <= 50; i++) {
                        responses['luz-' + Date.now()][`q${i}`] = {
                            type: 'select',
                            value: i % 5 === 0 ? 'Opci√≥n 5' : `Opci√≥n ${i % 5}`,
                            timestamp: new Date().toISOString(),
                            version: 1
                        };
                    }
                }
                
                storageAdapter.saveResponses(responses);
            }
        });

        // Configuraci√≥n de modales del footer
        document.addEventListener('DOMContentLoaded', function() {
            // Referencia al contenedor donde se inyectar√°n los modales
            const actionModalContainer = document.getElementById('actionModalContainer');

            // Funciones para manejo de UI (abrir/cerrar modal)
            const ui = {
                openModal: (content) => { 
                    actionModalContainer.innerHTML = content;
                    const modal = actionModalContainer.querySelector('.modal');
                    if (modal) {
                        // Muestra el modal con una peque√±a demora para la animaci√≥n
                        setTimeout(() => modal.classList.add('active'), 10);
                    }
                },
                closeModal: () => { 
                    const modal = actionModalContainer.querySelector('.modal');
                    if (modal) {
                        modal.classList.remove('active');
                        // Espera a que termine la animaci√≥n (0.3s) antes de vaciar el HTML
                        setTimeout(() => actionModalContainer.innerHTML = '', 300);
                    }
                }
            };

            // Plantillas HTML para el contenido de los modales
            const templates = {
                /* Contenido del Modal "Acerca de Nosotros" */
                aboutModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Acerca de Yachay Mikuy</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-bullseye"></i> Nuestra Misi√≥n</h3>
                                    <p>Reducir la prevalencia de anemia y malnutrici√≥n en ni√±os de 6 a 13 a√±os mediante planes de alimentaci√≥n personalizados, adaptados culturalmente y econ√≥micamente a la realidad de las familias peruanas.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-eye"></i> Nuestra Visi√≥n</h3>
                                    <p>Convertirnos en la plataforma digital l√≠der en nutrici√≥n infantil en Per√∫, contribuyendo al desarrollo humano y social del pa√≠s a trav√©s de h√°bitos alimentarios saludables.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-users"></i> Nuestro Equipo</h3>
                                    <p>Contamos con un equipo multidisciplinario de profesionales de la salud, nutricionistas, desarrolladores de software y expertos en educaci√≥n, comprometidos con mejorar la nutrici√≥n infantil en el pa√≠s.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-chart-line"></i> Impacto</h3>
                                    <p>Seg√∫n estudios del INEI (2023), la anemia infantil afecta a m√°s del 40% de ni√±os menores de 3 a√±os en algunas regiones del Per√∫. Nuestro proyecto busca reducir esta cifra mediante intervenciones personalizadas y seguimiento continuo.</p>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-award"></i> Reconocimientos</h3>
                                    <p>Proyecto seleccionado por la Universidad de Piura como iniciativa de impacto social en el programa de Ingenier√≠a Industrial y de Sistemas.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,
                
                /* Contenido del Modal "Servicios" */
                servicesModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Nuestros Servicios</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-utensils"></i> Planes de Alimentaci√≥n Personalizados</h3>
                                    <p>Desarrollamos planes nutricionales adaptados a las necesidades espec√≠ficas de cada ni√±o, considerando:</p>
                                    <ul>
                                        <li>Edad y estado de salud</li>
                                        <li>Disponibilidad de alimentos locales</li>
                                        <li>H√°bitos culturales y preferencias familiares</li>
                                        <li>Capacidad econ√≥mica del hogar</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-chart-line"></i> Seguimiento Nutricional</h3>
                                    <p>Monitoreamos el progreso de cada ni√±o a trav√©s de:</p>
                                    <ul>
                                        <li>Registro diario de consumo alimentario</li>
                                        <li>Evaluaci√≥n peri√≥dica de indicadores de salud</li>
                                        <li>Ajustes autom√°ticos seg√∫n resultados obtenidos</li>
                                        <li>Reportes mensuales para padres y tutores</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-graduation-cap"></i> Educaci√≥n Nutricional</h3>
                                    <p>Ofrecemos material educativo en m√∫ltiples formatos:</p>
                                    <ul>
                                        <li>Recetas pr√°cticas con ingredientes locales</li>
                                        <li>Videos tutoriales de preparaci√≥n</li>
                                        <li>Gu√≠as informativas sobre nutrientes esenciales</li>
                                        <li>Consejos para mejorar h√°bitos alimentarios</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-users"></i> Comunidad de Apoyo</h3>
                                    <p>Conectamos a las familias con:</p>
                                    <ul>
                                        <li>Nutricionistas y profesionales de la salud</li>
                                        <li>Otras familias que comparten experiencias</li>
                                        <li>Foros de discusi√≥n y consejos pr√°cticos</li>
                                        <li>Eventos virtuales de capacitaci√≥n</li>
                                    </ul>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-mobile-alt"></i> Accesibilidad</h3>
                                    <p>Nuestra plataforma funciona en modo offline y cuenta con versi√≥n ligera para zonas con conectividad limitada.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,

                /* Contenido del Modal "Preguntas Frecuentes" */
                faqModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Preguntas Frecuentes</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-question-circle"></i> ¬øQu√© es Yachay Mikuy?</h3>
                                    <p>Yachay Mikuy es una plataforma digital que ofrece planes de alimentaci√≥n personalizados para combatir la anemia infantil en Per√∫, combinando tecnolog√≠a, educaci√≥n y nutrici√≥n culturalmente adaptada.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-child"></i> ¬øPara qu√© edades est√° dise√±ada la plataforma?</h3>
                                    <p>Nuestra plataforma est√° dise√±ada para ni√±os de 0 a 13 a√±os, etapa crucial en el desarrollo donde los h√°bitos alimentarios se consolidan y se pueden prevenir deficiencias nutricionales a largo plazo.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-plus"></i> ¬øC√≥mo puedo registrarme?</h3>
                                    <p>Puedes registrarte haciendo clic en el bot√≥n "Comenzar Ahora" en nuestra p√°gina principal y completando el formulario con tus datos personales. El proceso es r√°pido y seguro.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-shield-alt"></i> ¬øEs seguro compartir los datos de mis hijos?</h3>
                                    <p>S√≠, implementamos medidas avanzadas de protecci√≥n de datos:</p>
                                    <ul>
                                        <li>Cifrado de extremo a extremo</li>
                                        <li>Consentimiento parental expl√≠cito</li>
                                        <li>Cumplimiento con normativas de protecci√≥n de datos</li>
                                        <li>Acceso restringido solo a personal autorizado</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-heartbeat"></i> ¬øC√≥mo funciona el seguimiento nutricional?</h3>
                                    <p>A trav√©s de nuestra aplicaci√≥n, puedes registrar el consumo alimentario de tus hijos y nosotros monitoreamos su progreso. El sistema genera alertas y recomendaciones autom√°ticas seg√∫n los resultados obtenidos.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-dollar-sign"></i> ¬øQu√© costo tiene el servicio?</h3>
                                    <p>Ofrecemos diferentes planes de suscripci√≥n:</p>
                                    <ul>
                                        <li>Plan b√°sico: S/10-15 mensuales</li>
                                        <li>Plan premium con atenci√≥n personalizada</li>
                                        <li>Subsidios para familias vulnerables mediante alianzas</li>
                                        <li>Acceso gratuito en centros educativos convenidos</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-wifi"></i> ¬øFunciona sin internet?</h3>
                                    <p>S√≠, contamos con modo offline que permite:</p>
                                    <ul>
                                        <li>Acceso a recetas y gu√≠as descargadas</li>
                                        <li>Registro de consumo para sincronizar despu√©s</li>
                                        <li>Notificaciones v√≠a SMS para zonas rurales</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-hands-helping"></i> ¬øC√≥mo obtengo ayuda si tengo problemas?</h3>
                                    <p>Puedes contactarnos a trav√©s de:</p>
                                    <ul>
                                        <li>Chat en vivo en la aplicaci√≥n</li>
                                        <li>Correo electr√≥nico: yachay.mikuy@gmail.com</li>
                                        <li>Tel√©fono: +51 918 072 862</li>
                                        <li>WhatsApp: +51 918 072 862</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>`,

                /* Contenido del Modal "Pol√≠tica de Privacidad" */
                privacyModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>Pol√≠tica de Privacidad</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-info-circle"></i> Informaci√≥n que Recopilamos</h3>
                                    <p>Recopilamos informaci√≥n personal y de salud de manera responsable:</p>
                                    <ul>
                                        <li><strong>Datos personales:</strong> Nombre, correo electr√≥nico, tel√©fono, departamento de residencia</li>
                                        <li><strong>Datos de los ni√±os:</strong> Nombre, fecha de nacimiento, peso, altura, historial m√©dico relevante</li>
                                        <li><strong>Datos de uso:</strong> Interacciones con la plataforma, preferencias alimentarias, progreso nutricional</li>
                                        <li><strong>Datos t√©cnicos:</strong> Direcci√≥n IP, tipo de dispositivo, navegador utilizado</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-cogs"></i> Uso de la Informaci√≥n</h3>
                                    <p>Utilizamos tu informaci√≥n para:</p>
                                    <ul>
                                        <li>Proporcionar planes de alimentaci√≥n personalizados</li>
                                        <li>Realizar seguimiento nutricional efectivo</li>
                                        <li>Mejorar continuamente nuestros servicios</li>
                                        <li>Comunicarnos contigo sobre actualizaciones relevantes</li>
                                        <li>Generar reportes estad√≠sticos anonimizados</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-lock"></i> Protecci√≥n de Datos</h3>
                                    <p>Implementamos medidas de seguridad robustas:</p>
                                    <ul>
                                        <li>Cifrado SSL/TLS para todas las transmisiones</li>
                                        <li>Almacenamiento cifrado en servidores seguros</li>
                                        <li>Autenticaci√≥n de dos factores para accesos cr√≠ticos</li>
                                        <li>Auditor√≠as de seguridad peri√≥dicas</li>
                                        <li>Backups autom√°ticos y recovery plan</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-shield"></i> Derechos de los Usuarios</h3>
                                    <p>Tienes derecho a:</p>
                                    <ul>
                                        <li><strong>Acceder:</strong> Solicitar una copia de tus datos personales</li>
                                        <li><strong>Rectificar:</strong> Corregir informaci√≥n inexacta o incompleta</li>
                                        <li><strong>Cancelar:</strong> Solicitar la eliminaci√≥n de tus datos</li>
                                        <li><strong>Oponerse:</strong> Restringir el procesamiento de tus datos</li>
                                        <li><strong>Portabilidad:</strong> Transferir tus datos a otro servicio</li>
                                    </ul>
                                    <p>Para ejercer estos derechos, contacta a yachay.mikuy@gmail.com</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-friends"></i> Consentimiento Parental</h3>
                                    <p>Para el tratamiento de datos de menores:</p>
                                    <ul>
                                        <li>Requerimos consentimiento expl√≠cito de padres o tutores</li>
                                        <li>Los padres son responsables de la veracidad de los datos</li>
                                        <li>Podemos solicitar documentaci√≥n adicional si es necesario</li>
                                        <li>Los padres pueden revocar el consentimiento en cualquier momento</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-clock"></i> Retenci√≥n de Datos</h3>
                                    <p>Conservamos los datos seg√∫n los siguientes criterios:</p>
                                    <ul>
                                        <li>Datos de cuenta: mientras la cuenta est√© activa</li>
                                        <li>Datos de salud: m√≠nimo 5 a√±os despu√©s del √∫ltimo uso</li>
                                        <li>Datos financieros: 7 a√±os seg√∫n normativa fiscal</li>
                                        <li>Datos anonimizados: indefinidamente para estad√≠sticas</li>
                                    </ul>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-exclamation-triangle"></i> Importante</h3>
                                    <p>Esta pol√≠tica se actualiza peri√≥dicamente. Te notificaremos cualquier cambio significativo a trav√©s de tu correo electr√≥nico registrado.</p>
                                </div>
                            </div>
                        </div>
                    </div>`,

                /* Contenido del Modal "T√©rminos y Condiciones" */
                termsModal: () => `
                    <div class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2>T√©rminos y Condiciones</h2>
                                <button class="close-modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="content-section">
                                    <h3><i class="fas fa-check-circle"></i> Aceptaci√≥n de los T√©rminos</h3>
                                    <p>Al utilizar la plataforma Yachay Mikuy, aceptas estos t√©rminos y condiciones en su totalidad. Si no est√°s de acuerdo con alguno de estos t√©rminos, no debes utilizar nuestros servicios.</p>
                                    <p>El uso continuado de la plataforma despu√©s de cualquier modificaci√≥n constituye aceptaci√≥n de los nuevos t√©rminos.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-cube"></i> Descripci√≥n del Servicio</h3>
                                    <p>Yachay Mikuy es una plataforma digital que ofrece:</p>
                                    <ul>
                                        <li>Planes de alimentaci√≥n personalizados para ni√±os de 0 a 13 a√±os</li>
                                        <li>Seguimiento nutricional continuo</li>
                                        <li>Educaci√≥n nutricional adaptada culturalmente</li>
                                        <li>Comunidad de apoyo para padres y cuidadores</li>
                                        <li>Acceso a profesionales de la salud</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-user-check"></i> Responsabilidades del Usuario</h3>
                                    <p>Como usuario, te comprometes a:</p>
                                    <ul>
                                        <li>Proporcionar informaci√≥n veraz y actualizada</li>
                                        <li>Mantener la confidencialidad de tus credenciales de acceso</li>
                                        <li>Seguir las recomendaciones nutricionales de manera responsable</li>
                                        <li>No compartir contenido inapropiado u ofensivo</li>
                                        <li>Respetar los derechos de otros usuarios</li>
                                        <li>Reportar cualquier problema o incidencia</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-ban"></i> Uso Prohibido</h3>
                                    <p>Est√° estrictamente prohibido:</p>
                                    <ul>
                                        <li>Utilizar la plataforma para fines comerciales no autorizados</li>
                                        <li>Intentar acceder a cuentas de otros usuarios</li>
                                        <li>Distribuir malware o software malicioso</li>
                                        <li>Violentar la propiedad intelectual de Yachay Mikuy</li>
                                        <li>Proporcionar informaci√≥n m√©dica falsa o enga√±osa</li>
                                        <li>Acosar o intimidar a otros usuarios</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-copyright"></i> Propiedad Intelectual</h3>
                                    <p>Todo el contenido de la plataforma est√° protegido por derechos de autor:</p>
                                    <ul>
                                        <li>Textos, im√°genes, dise√±os, logotipos y software</li>
                                        <li>Algoritmos de recomendaci√≥n nutricional</li>
                                        <li>Base de datos de recetas y alimentos</li>
                                        <li>Material educativo y formatos originales</li>
                                    </ul>
                                    <p>Queda prohibida la reproducci√≥n total o parcial sin autorizaci√≥n expresa.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-heart"></i> Informaci√≥n M√©dica</h3>
                                    <p>Importante considerar:</p>
                                    <ul>
                                        <li>Yachay Mikuy no reemplaza la consulta m√©dica profesional</li>
                                        <li>Las recomendaciones son complementarias al tratamiento m√©dico</li>
                                        <li>Ante cualquier emergencia m√©dica, contacta a servicios de salud</li>
                                        <li>Los planes nutricionales deben ser supervisados por profesionales</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-exclamation-triangle"></i> Limitaci√≥n de Responsabilidad</h3>
                                    <p>Yachay Mikuy no se responsabiliza por:</p>
                                    <ul>
                                        <li>El uso indebido de la plataforma por parte de los usuarios</li>
                                        <li>Consecuencias derivadas de no seguir adecuadamente las recomendaciones</li>
                                        <li>Problemas t√©cnicos fuera de nuestro control</li>
                                        <li>Contenido proporcionado por terceros</li>
                                        <li>Da√±os indirectos, incidentales o consecuentes</li>
                                    </ul>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-sync-alt"></i> Modificaciones de los T√©rminos</h3>
                                    <p>Yachay Mikuy se reserva el derecho de:</p>
                                    <ul>
                                        <li>Modificar estos t√©rminos y condiciones en cualquier momento</li>
                                        <li>Actualizar las pol√≠ticas de privacidad y uso de datos</li>
                                        <li>Cambiar las caracter√≠sticas y funcionalidades del servicio</li>
                                        <li>Suspender o terminar servicios por razones justificadas</li>
                                    </ul>
                                    <p>Las modificaciones entrar√°n en vigor desde su publicaci√≥n en la plataforma.</p>
                                </div>
                                <div class="content-section">
                                    <h3><i class="fas fa-gavel"></i> Ley Aplicable y Jurisdicci√≥n</h3>
                                    <p>Estos t√©rminos se rigen por las leyes de la Rep√∫blica del Per√∫. Cualquier disputa ser√° resuelta en los tribunales de Lima, Per√∫.</p>
                                </div>
                                <div class="highlight-box">
                                    <h3 style="margin-top:0;"><i class="fas fa-calendar-alt"></i> Vigencia</h3>
                                    <p>Estos t√©rminos y condiciones entran en vigor a partir del 1 de enero de 2025 y permanecer√°n vigentes hasta su modificaci√≥n.</p>
                                </div>
                            </div>
                        </div>
                    </div>`
            };

            // Escucha global de clics para manejar la apertura y cierre de modales
            document.body.addEventListener('click', (e) => {
                // L√≥gica para ABRIR el modal seg√∫n el ID del enlace del footer
                if (e.target.matches('#aboutLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.aboutModal()); 
                } else if (e.target.matches('#servicesLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.servicesModal()); 
                } else if (e.target.matches('#faqLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.faqModal()); 
                } else if (e.target.matches('#privacyLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.privacyModal()); 
                } else if (e.target.matches('#termsLink')) { 
                    e.preventDefault(); 
                    ui.openModal(templates.termsModal()); 
                }

                // L√≥gica para CERRAR el modal:
                // Si el clic es en el fondo negro (.modal) o en el bot√≥n de cerrar (.close-modal)
                if (e.target.matches('.modal') || e.target.matches('.close-modal')) { 
                    ui.closeModal(); 
                }
            });
        });
    </script>
</body>
</html>
